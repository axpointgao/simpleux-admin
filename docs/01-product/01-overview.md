# 产品概述

## 一、产品定位

本系统是一个面向设计团队的项目管理和业绩管理系统，旨在帮助团队高效管理商业项目、售前支持、专业贡献等各类业务活动，实现项目全生命周期管理、业绩跟踪、工时统计和成本控制。

## 二、目标用户

### 2.1 主要用户群体

**系统管理员**：

- 负责系统配置和维护
- 管理用户、角色、权限
- 配置审批流程、成本标准等系统参数

**部门主管**：

- 管理本部门的项目和业务活动
- 审批项目创建、变更、补录等申请
- 审批专业贡献立项申请
- 分配任务和计划工时
- 查看部门业绩和成本统计

**项目经理**：

- 创建和管理商业项目
- 录入项目预算和支出
- 跟踪项目进度和状态
- 申请项目变更和补录
- 查看项目业绩和成本分析

**员工**：

- 查看分配给自己的任务
- 录入实际工时
- 申请专业贡献立项
- 提交专业贡献验收申请
- 查看个人业绩和工时统计

**商务经理**：

- 创建和管理售前支持活动
- 记录商机跟进情况
- 查看售前支持成本统计

### 2.2 用户角色权限

系统采用基于角色的权限控制（RBAC），不同角色拥有不同的功能权限：

- **系统管理员**：拥有所有权限
- **部门主管**：拥有部门管理权限、审批权限、任务管理权限
- **项目经理**：拥有项目相关权限、任务管理权限
- **员工**：拥有基础查看和操作权限、工时录入权限
- **商务经理**：拥有售前支持相关权限

## 三、核心价值

### 3.1 项目全生命周期管理

- **统一的项目管理平台**：集中管理商业项目、售前支持、专业贡献等各类业务活动
- **完整的项目流程**：从项目创建、预算录入、支出管理、变更管理到项目归档的全流程管理
- **灵活的审批流程**：支持多步骤审批，可配置审批流程模板

### 3.2 业绩跟踪和管理

- **业绩全流程管理**：业绩登记、验收、结算、到账的完整流程
- **业绩拆分功能**：支持跨部门资源借用的业绩拆分
- **业绩统计分析**：多维度业绩统计和分析报表

### 3.3 工时和成本管理

- **灵活的工时管理**：支持计划工时分配和实际工时录入，自动排除节假日
- **成本自动计算**：根据工时和人日成本标准自动计算人力成本
- **成本对比分析**：预算成本与实际成本对比，及时发现成本偏差

### 3.4 任务和工时统计

- **统一的任务管理**：支持为项目、售前支持、专业贡献等创建任务
- **工时日历视图**：直观的日历视图展示工时分布
- **多维度工时统计**：按任务、执行人、业务实体、日期区间等维度统计

### 3.5 专业贡献管理

- **专业贡献全流程**：立项申请、审批、任务管理、验收申请、评级
- **灵活的积分设置**：申请人在立项时灵活设置积分
- **自动任务创建**：审批通过后自动为执行人创建任务

## 四、产品架构概览

### 4.1 核心业务模块

**商业项目管理模块**：

- 项目创建和管理
- 预算管理（人力、差旅、外包）
- 支出管理（人力、差旅、外包）
- 项目变更管理
- 项目补录申请
- 设计确认
- 项目归档

**业绩管理模块**：

- 业绩登记
- 业绩验收
- 业绩结算
- 业绩到账
- 业绩拆分

**售前支持模块**：

- 商机管理
- 跟进记录
- 成本管理（人力、差旅、外包）
- 任务和工时管理

**专业贡献模块**：

- 立项申请
- 审批流程
- 任务管理
- 验收申请
- 评级管理

**任务和工时管理模块**：

- 任务创建和管理
- 计划工时分配
- 实际工时录入
- 工时统计和日历视图

**审批管理模块**：

- 审批创建和执行
- 审批流程管理
- 审批列表和详情
- 钉钉待办集成

**系统设置模块**：

- 人日成本设置
- 角色权限设置
- 审批流程设置
- 节假日管理
- 客户部管理
- 供应商管理
- 通知设置
- 系统参数设置

### 4.2 技术架构

**前端技术栈**：

- Next.js 14（App Router）
- TypeScript
- Tailwind CSS
- Arco Design React

**后端技术栈**：

- Next.js Server Actions
- Supabase（数据库、认证、基础文件存储）- **主要服务**
- 阿里云 OSS（大文件存储，可选）- **补充服务**
- 阿里云 CDN（静态资源加速，可选）- **补充服务**

**第三方集成**：

- 钉钉开放平台（组织架构同步、通知、待办）

### 4.3 数据架构

**核心数据表**：

- 用户和部门表
- 项目相关表
- 业绩相关表
- 售前支持相关表
- 专业贡献相关表
- 任务和工时相关表
- 审批相关表
- 系统设置相关表

**数据关系**：

- 项目、售前支持、专业贡献等业务实体可以关联多个任务
- 任务可以关联计划工时和实际工时
- 审批记录关联到业务实体
- 业绩记录关联到项目或需求

## 五、产品特色功能

### 5.1 智能工时分配

- **自动排除节假日**：系统自动排除周末和节假日，只分配到工作日
- **两种分配模式**：支持合计工时模式和每天工时模式
- **调休工作日支持**：支持设置调休工作日，在周末或节假日标记为工作日

### 5.2 灵活的审批流程

- **可配置审批流程**：支持为不同审批类型配置不同的审批流程
- **多步骤审批**：支持多步骤顺序审批
- **钉钉待办集成**：审批通知通过钉钉发送，点击跳转到系统内审批页面

### 5.3 业绩拆分功能

- **跨部门业绩拆分**：支持将业绩拆分给其他部门
- **拆分记录管理**：记录拆分原因、拆分金额、拆分部门等信息
- **拆分统计**：支持按部门统计拆分业绩

### 5.4 成本自动计算

- **人力成本自动计算**：根据工时和人日成本标准自动计算人力成本
- **成本标准管理**：支持设置不同员工级别和城市类型的人日成本标准
- **成本对比分析**：预算成本与实际成本对比，及时发现成本偏差

### 5.5 工时日历视图

- **直观的日历展示**：月视图、周视图、日视图展示工时分布
- **多维度筛选**：支持按任务、执行人、业务实体、部门等维度筛选
- **快速录入**：在日历视图中直接点击日期录入工时

## 六、产品目标

### 6.1 短期目标（3 个月）

- 完成核心功能开发
- 实现项目管理和业绩管理基础功能
- 实现任务和工时管理功能
- 实现审批流程管理
- 完成钉钉集成

### 6.2 中期目标（6 个月）

- 完善所有业务模块功能
- 优化用户体验
- 增加数据统计和分析功能
- 完成系统测试和优化

### 6.3 长期目标（12 个月）

- 持续优化产品功能
- 增加更多数据分析和报表功能
- 支持移动端访问
- 扩展更多第三方集成

## 七、产品约束

### 7.1 技术约束

- 必须使用 Next.js 14
- 必须使用 Supabase 作为主要后端服务（数据库、认证）
- 必须支持钉钉集成
- 必须支持 HTTPS 访问
- 必须支持响应式设计
- 可选使用阿里云服务作为补充（文件存储、CDN）

### 7.2 业务约束

- 必须遵循现有的业务规则和流程
- 必须支持多部门管理
- 必须支持权限控制
- 必须支持数据审计和追溯

### 7.3 性能约束

- 页面加载时间 < 2 秒
- API 响应时间 < 500ms
- 支持至少 100 个并发用户
- 数据库查询优化，避免慢查询

## 八、产品路线图

### 第一阶段：核心功能开发（1-3 个月）

- 用户认证和权限管理
- 商业项目管理
- 业绩管理
- 任务和工时管理
- 审批管理
- 系统设置

### 第二阶段：功能完善（4-6 个月）

- 售前支持管理
- 专业贡献管理
- 数据统计和分析
- 钉钉集成优化
- 用户体验优化

### 第三阶段：高级功能（7-12 个月）

- 移动端支持
- 更多数据分析和报表
- 自动化工作流
- 更多第三方集成
- 性能优化和扩展
