# 专业贡献模块功能需求

## 一、功能概述

专业贡献模块用于管理专业贡献的全生命周期，包括立项申请、审批、任务管理、验收申请、评级等功能。支持员工自行立项和主管帮下属立项两种方式。

## 二、功能列表

### 2.1 立项申请

**功能描述**：
- 支持员工自行立项和主管帮下属立项
- 立项申请需要填写专业贡献信息、执行人、积分等
- 员工自行立项需要主管审批，主管帮下属立项自动审批

**功能要求**：

1. **基本信息录入**：
   - 专业贡献名称（必填，文本输入）
   - 专业贡献类别（必填，下拉选择：专项调研/案例文章/演讲分享/专项研讨/创方法/其他）
   - 专业贡献子类别（必填，下拉选择或文本输入，根据类别动态加载）
   - 立项说明（可选，文本域）
   - 立项日期（必填，日期选择器，默认为今天）
   - 归属部门（必填，下拉选择）

2. **执行人录入**：
   - 添加执行人（至少一个）
   - 选择执行人（从员工列表中选择）
   - 设置该执行人的积分（必填，数字输入）
   - 支持添加多个执行人，每个执行人单独设置积分

3. **申请人设置**：
   - 员工自行立项：申请人默认为当前用户
   - 主管帮下属立项：需要选择申请人（下属）

4. **提交流程**：
   - 员工自行立项：提交后创建专业贡献，状态为"待审批"，等待主管审批
   - 主管帮下属立项：提交后自动完成审批，状态直接变为"进行中"
   - 审批通过后，系统自动为每个执行人创建一条任务

**交互设计**：
- 立项申请表单使用单页表单
- 执行人列表支持动态添加和删除
- 表单验证和错误提示

### 2.2 专业贡献列表

**功能描述**：
- 显示所有专业贡献列表
- 支持多维度筛选和搜索
- 支持排序和分页

**功能要求**：

1. **列表字段**：
   - 专业贡献名称
   - 类别
   - 子类别
   - 积分
   - 申请人
   - 归属部门
   - 立项日期
   - 状态
   - 评级（A/B/C，可为空）
   - 操作按钮（查看详情、提交验收、评级等）

2. **筛选条件**：
   - 所属体验组（归属部门，下拉选择，多选）
   - 专业贡献名称（文本输入，模糊搜索）
   - 类别（下拉选择，多选）
   - 子类别（下拉选择，多选）
   - 状态（下拉选择，多选）
   - 申请人（下拉选择，多选）
   - 评级（下拉选择，多选：A/B/C）

3. **排序**：
   - 默认按创建时间倒序
   - 支持按立项日期、评级等字段排序

4. **分页**：
   - 每页显示20条记录
   - 支持跳转到指定页码

**交互设计**：
- 列表使用表格展示
- 筛选条件在列表顶部，支持展开/收起
- 支持批量操作（如批量导出）

### 2.3 专业贡献详情

**功能描述**：
- 显示专业贡献的完整信息
- 支持查看和管理审批记录、任务、验收记录、评级等

**功能要求**：

1. **基本信息区域**：
   - 专业贡献名称、类别、子类别、申请人、归属部门、立项日期、状态、评级
   - 立项说明
   - 操作按钮（编辑、删除、提交验收、评级等）

2. **执行人列表区域**：
   - 显示所有执行人及其积分
   - 执行人姓名、积分

3. **审批记录区域**：
   - 显示审批记录
   - 审批人、审批时间、审批意见、审批状态
   - 操作按钮（查看详情）

4. **任务列表区域**：
   - 显示专业贡献关联的所有任务（系统自动创建）
   - 任务名称、执行者、状态、计划工时、实际工时
   - 操作按钮（查看详情、分配计划工时）

5. **验收记录区域**：
   - 显示验收记录
   - 验收申请人、验收人、验收时间、验收状态、验收意见
   - 操作按钮（查看详情）

6. **评级记录区域**：
   - 显示评级记录
   - 评级（A/B/C）、评级人、评级时间
   - 操作按钮（修改评级，总监权限）

**交互设计**：
- 使用标签页组织不同区域的内容
- 支持展开/收起各个区域
- 支持跳转到相关模块（如任务管理）

### 2.4 审批管理

**功能描述**：
- 支持审批专业贡献立项申请
- 员工自行立项需要主管审批
- 主管帮下属立项自动审批

**功能要求**：

1. **审批流程**：
   - 员工自行立项：需要主管审批
     - 审批通过：专业贡献状态直接变为"进行中"，系统自动为每个执行人创建一条任务
     - 审批拒绝：专业贡献状态变为"已拒绝"，可以填写拒绝原因
   - 主管帮下属立项：自动完成审批，状态直接变为"进行中"，系统自动为每个执行人创建一条任务

2. **审批操作**：
   - 查看专业贡献信息（包括名称、类别、子类别、申请人、立项说明）
   - 查看执行人列表（包括每个执行人及其积分）
   - 填写审批意见（可选）
   - 选择审批操作（通过/拒绝）

3. **审批记录**：
   - 显示审批记录
   - 审批人、审批时间、审批意见、审批状态

**交互设计**：
- 审批弹窗显示专业贡献信息
- 支持审批通过和拒绝操作
- 审批记录使用列表展示

### 2.5 任务管理

**功能描述**：
- 专业贡献审批通过后，系统自动为每个执行人创建一条任务
- 任务名称与专业贡献名称相同
- 任务执行者就是对应的执行人
- 任务管理功能在任务和工时管理模块中实现

**功能要求**：

1. **任务创建**：
   - 审批通过后，系统自动为每个执行人创建一条任务
   - 任务名称与专业贡献名称相同
   - 任务执行者就是对应的执行人
   - 任务关联到专业贡献（`entityType = 'contribution'`）

2. **任务列表**：
   - 显示专业贡献关联的所有任务
   - 任务名称、执行者、状态、计划工时、实际工时
   - 支持跳转到任务详情页

3. **工时管理**：
   - 计划工时分配（归属部门主管权限）
   - 实际工时录入（任务执行者权限）
   - 工时统计和分析

**交互设计**：
- 任务列表在专业贡献详情页显示
- 支持分配计划工时按钮
- 支持跳转到任务管理模块

### 2.6 验收申请

**功能描述**：
- 支持提交专业贡献验收申请
- 申请人或执行人可以发起验收申请
- 验收由专人确认

**功能要求**：

1. **提交验收申请**：
   - 申请人或执行人在专业贡献详情页，点击"提交验收申请"
   - 系统验证：专业贡献状态必须是"进行中"
   - 填写验收说明（可选）
   - 提交后，创建验收申请记录，状态为"pending"
   - 专业贡献状态变为"待验收"

2. **验收确认**：
   - 专人收到验收通知，进行验收确认
   - 查看专业贡献信息和任务信息
   - 填写验收意见（可选）
   - 选择验收操作（通过/拒绝）
   - 验收通过后，专业贡献状态变为"已验收通过"

3. **验收记录**：
   - 显示验收记录
   - 验收申请人、验收人、验收时间、验收状态、验收意见

**交互设计**：
- 验收申请弹窗显示专业贡献信息
- 验收确认弹窗显示专业贡献信息和任务信息
- 验收记录使用列表展示

### 2.7 评级管理

**功能描述**：
- 支持对已验收通过的专业贡献进行评级
- 评级由总监操作
- 评级可以随时修改

**功能要求**：

1. **评级操作**：
   - 总监在专业贡献详情页或列表页，查看已验收通过的专业贡献
   - 点击"评级"按钮
   - 选择评级：A（优秀，超出预期）/B（良好，符合预期）/C（一般，勉强通过）
   - 提交后，保存评级记录

2. **评级管理**：
   - 查看当前评级（A/B/C）
   - 修改评级（可以随时修改）
   - 查看评级记录（评级人、评级时间）

3. **评级统计**：
   - 按评级统计专业贡献数量
   - 按评级统计积分

**交互设计**：
- 评级弹窗显示专业贡献信息和当前评级
- 评级使用下拉选择器
- 评级记录使用列表展示

## 三、功能优先级

### 3.1 P0（必须实现）

- 立项申请
- 专业贡献列表
- 专业贡献详情
- 审批管理
- 任务管理
- 验收申请

### 3.2 P1（重要功能）

- 评级管理
- 统计和分析
- 批量操作

### 3.3 P2（可选功能）

- 专业贡献报表
- 专业贡献分析
- 专业贡献导出

## 四、验收标准

### 4.1 功能验收

- 所有P0功能必须完整实现
- 所有P1功能必须完整实现
- 功能符合业务逻辑规则文档要求
- 审批流程正确实现
- 任务自动创建功能正确实现

### 4.2 性能验收

- 专业贡献列表加载时间 < 2秒
- 专业贡献详情加载时间 < 1秒
- 任务自动创建响应时间 < 1秒

### 4.3 用户体验验收

- 界面友好，操作流畅
- 错误提示清晰
- 支持响应式设计
- 执行人列表操作便捷

